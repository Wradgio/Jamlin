# JaMLin
**Ja**va **M**arkup **L**anguage **In**ternalization is a simple command line tool that works in 2 modes Extract and Replace. They are used to:

1. **EXTRACT strings from original HTML or XML.** (eg. index.html)
	* using CSS selectors.
	* creating JSON that can be used to add translations.
2. **REPLACE strings with localized ones.**
	* created from JSON with translations.
	* creating new HTML or XML files (eg. index-en.html).

## What is it good for
For projects that use static HTML. Sometimes you need to keep HTML in project without additional formating, but with some internalization tool.

## How to use it

To define variables for both actions, there are two possible sources of data:
1. Config file
2. Parameters

### Config file
Every time you run JaMLin, it's looking for config file, named **jamlin_config.json** which defines all data needed for extraction in this structure:
```json
{
	"sources": {
		"directories": [
			{
				"path": "templates/",
				"extensions": [ "html", "xml" ],
				"traverse": false,
				"selectors": {
					"texts": {
						"type": "text",
						"selector": "p, a"
					},
					"params": {
						"type": "attribute",
						"selector": "a[title], img[title]",
						"attrName": "title"
					}
				}
			}
		],
		"files": [
			{
				"path": "test-*.html",
				"selectors": {
					"texts": {
						"type": "text",
						"selector": "p, a"
					},
					"params": {
						"type": "attribute",
						"selector": "a[title], img[title]",
						"attrName": "title"
					}
				}
			}
		]
	},
	"target": {
		"replace_file": true,
		"replace_pattern": "*-$lang.*"
	}
}
```

Depending on settings of config, JaMLin by default uses "extract" action to traverse defined items and trying to extract their translations. When run with "replace" action, it tries to get new translations back to its original files.

### Parameters
JaMLin receives 4 parameters. Examples of using Jamlin looks like this:

`java -jar jamlin-jar-with-dependencies.jar
	--action "extract"
	--source "jamlin_demo.html"
	--language "sk"`

`java -jar jamlin-jar-with-dependencies.jar
	--action "replace"
	--source "jamlin_demo-extract.json"
	--target "jamlin_demo.html"
	--language "en"`

Parameters legend:

* **action** (required) - supports 2 values:
	* "extract" (default),
	* "replace".
* **source** - source file to read, differs according to action:
	* for "extract" action it's HTML file,
	* for "replace" action it's JSON file generated by "extract" command.
* **target** - target file is for one action only:
	* for "replace" action it's HTML file whose name will be used to create file names for target HTML files.
* **language** (optional) - language (eg. "en", "en\_US", "zh\_CN_#Hans", ...) works two ways
	* for "extract" action it sets, what language version was used for extract strings,
	* for "replace" action sets what language you want to output.


## Translation
JaMLin does not translate data by itself. To translate it, you need to fill translations into JSON file using this format:
```json
{
  "translationBlocks": [
    {
      "name": "texts",
      "cssSelector": "p, a",
      "type": "text",
      "translationStrings": [
        {
          "stringOrig": "Menu",
          "selector": "#mobile_menu",
          "translations": [
            {
              "langCode": "en",
              "translation": "Menu EN version"
            },
            {
              "langCode": "sk",
              "translation": "Menu SK version"
            }
          ]
        }
      ]
    }
  ]
}
```
For that, you can use any editor, that can read JSON files or wait for **JaMLin Translation Editor** (in development).

## Why is it such a mess
It's my first tool in Java and Maven, a one man project. It will take a time to clean it up, any help is appreciated.
